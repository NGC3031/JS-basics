<!--Demo code for basic canvas animation -->
<html>

<head>
    <title>Animate Canvas Demo Ball - updated stucture with fps</title>
    <script>
    </script>
</head>
<style "text/css">
    body {
        margin: 0;
    }

    canvas {
        background: white;
        color: aqua;
        border: 1px solid red;
    }
</style>

<body>
    <canvas id="canvas" width="500" height="500">
        Your browser doesn't support the HTML5 element canvas.
    </canvas>
    <script>
        var canvas = document.querySelector('canvas');
        var date = new Date();
        var timestamp = date.getTime();
        var previous = 0.0;
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        //get the handle to the canvas through context
        var ctx = canvas.getContext('2d');

        var x = 200;
        var y = 200;
        var dx = 15;
        var dy = 5;
        var radius = 20;

        function frame() {
            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
            if (!previous) previous = timestamp;
            elapsed = timestamp - previous;
            update(elapsed / 1000);
            draw(ctx, true);
            previous = timestamp;
            window.requestAnimationFrame(frame);
        }

        function update() {
            x += dx;
            y += dy;
            if ((x - radius) < 0 || (x + radius) > innerWidth) dx = -dx;
            if ((y - radius) < 0 || (y + radius) > innerHeight) dy = -dy;
        }

        function draw(c) {
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2, false);
            ctx.strokeStyle = 'red';
            ctx.fillStyle = 'rgba(255, 0, 0, 0.75)';
            ctx.fill();
            ctx.stroke();
        }
        requestAnimationFrame(frame);
    </script>
</body>

</html>